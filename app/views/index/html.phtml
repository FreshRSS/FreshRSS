<?php
	declare(strict_types=1);
	/** @var FreshRSS_View $this */
	// Override some layout preferences
	FreshRSS_Context::userConf()->content_width = 'large';
	FreshRSS_Context::userConf()->show_tags = 'f';
?>
<!-- TODO: <nav> with pagination -->
<main id="stream" class="reader api">
	<h2>
		<?= FreshRSS_View::title() ?> Â·
		<a class="view-rss" href="<?= $this->rss_url ?>" title="<?= _t('index.menu.rss_view') ?>">
			<?= _i('rss') ?>
		</a>
	</h2>
	<?php
		foreach ($this->entries as $entry):
			$this->entry = $entry;
			//We most likely already have the feed object in cache, otherwise make a request
			$this->feed = FreshRSS_CategoryDAO::findFeed($this->categories, $entry->feedId()) ?? $entry->feed() ?? FreshRSS_Feed::default();
	?>
		<div class="flux">
			<?php $this->renderHelper('index/article'); ?>
		</div>
	<?php endforeach; ?>
</main>
